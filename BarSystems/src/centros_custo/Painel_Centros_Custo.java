
package centros_custo;

import java.util.ArrayList;
import javax.swing.JOptionPane;
import principal.Principal;
import javax.swing.JTabbedPane;

public class Painel_Centros_Custo extends javax.swing.JPanel {

    int id_usuario;
    String nome_usuario;
    protected ArrayList array = new ArrayList(), arrayNome = new ArrayList();
     
    public Painel_Centros_Custo(JTabbedPane painel_principal, int id_usuario, String usuario) {
        initComponents();
        
        this.id_usuario = id_usuario;
        this.nome_usuario = usuario;
    }
    
    public void adicionaCentrosCusto() {
        painel_centros_custo.setBounds(0, 0, 2000, 2000);
        Class_Centros_Custo centros_custo = new Class_Centros_Custo();
        centros_custo.getCentrosCusto(painel_centros_custo, id_usuario, nome_usuario);
        array = centros_custo.getArray();
        arrayNome = centros_custo.getArrayNome();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        painel_centros_custo = new javax.swing.JTabbedPane();

        setLayout(null);

        painel_centros_custo.setFont(new java.awt.Font("Arial", 0, 14)); // NOI18N
        painel_centros_custo.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                painel_centros_custoStateChanged(evt);
            }
        });
        add(painel_centros_custo);
        painel_centros_custo.setBounds(0, 0, 530, 390);
    }// </editor-fold>//GEN-END:initComponents

    private void painel_centros_custoStateChanged(javax.swing.event.ChangeEvent evt) {//GEN-FIRST:event_painel_centros_custoStateChanged
        
        if (this.isVisible()) {
            //AGORA IREMOS CARREGAR O CENTRO DE CUSTO QUE FOI FEITO O LANÇAMENTO
            String nome = "";
            String centro = painel_centros_custo.getTitleAt(painel_centros_custo.getSelectedIndex());
            String tipo_centro = "";
            Class_Centros_Custo centros = new Class_Centros_Custo();
            for (int i = 0; i < array.size(); i++) {
                nome = arrayNome.get(i).toString();
                if (nome.equals(centro)) {
                    tipo_centro = centros.retornaTipoCentroCusto(nome);
                    if (tipo_centro.equals("Caixa")) {
                        Painel_Caixa painel_caixa = (Painel_Caixa) array.get(i);
                        painel_caixa.refreshMovimentacaoCaixa();
                    } else if (tipo_centro.equals("Conta bancária")) {
                        Painel_Conta_Bancaria painel_conta = (Painel_Conta_Bancaria) array.get(i);
                        painel_conta.refreshMovimentacoes();
                    } else {
                        Painel_Agendamentos agendamentos = (Painel_Agendamentos) array.get(i);
                        agendamentos.refreshLancamentos();
                    }
                }
            }
        }
        
    }//GEN-LAST:event_painel_centros_custoStateChanged


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JTabbedPane painel_centros_custo;
    // End of variables declaration//GEN-END:variables
}
